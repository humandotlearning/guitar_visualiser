"use strict";(self.webpackChunkguitar_scale_visualizer=self.webpackChunkguitar_scale_visualizer||[]).push([[952],{952:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(43),s=r(128),o=r(923),a=r(579);const i=e=>{let{note:t,fret:r,isRoot:o,selectedScale:i,showScaleDegrees:c,rootNote:l,stringNote:u,onNoteTap:d}=e;const[h,m]=(0,n.useState)(!1),f=i?(0,s.Ap)(l,s.pu[i.category][i.name]):[],g=f.includes(t),x=g?(0,s.DE)(t,l,s.pu[i.category][i.name]):"";return(0,a.jsxs)("div",{className:"fret "+(0===r?"first-fret":""),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[g&&(0,a.jsx)("div",{className:`note-marker ${(()=>{if(!g)return"";if(o)return"root";switch(f.indexOf(t)){case 2:return"third";case 4:return"fifth";case 6:return"seventh";default:return"scale-note"}})()}`,onClick:()=>d(t,(()=>{let e;e="E"===u?r<7?2:4:"A"===u?2:3;const t=s.Y6.indexOf(u);return e+=Math.floor((t+r)/12),e})()),style:{cursor:"pointer"},children:c?x:t}),h&&(0,a.jsxs)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 bg-white border border-gray-300 px-2 py-1 rounded shadow z-10",children:[t," ",x&&`(${x})`]})]})},c=e=>{let{note:t,index:r,onClick:n}=e;return(0,a.jsx)("div",{className:"string-label",onClick:()=>n(t,r),style:{cursor:"pointer"},children:t})},l=e=>{let{rootNote:t,selectedScale:r,showScaleDegrees:l,setShowScaleDegrees:u,tuning:d,fretCount:h,selectedInstrument:m}=e;const[f,g]=(0,n.useState)(!1),[x,w]=(0,n.useState)(!1),[v,p]=(0,n.useState)(0),[y,b]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=()=>{(async()=>{if("undefined"!==typeof window)try{await o.Xg(),await o.wD(m||"acoustic_guitar_steel"),g(!0)}catch(e){console.error("Error initializing audio:",e)}})(),document.removeEventListener("click",e)};return document.addEventListener("click",e,{once:!0}),()=>{document.removeEventListener("click",e)}}),[m]),(0,n.useEffect)((()=>{if(f&&m){(async()=>{try{await o.wD(m)}catch(e){console.error("Error loading instrument:",e)}})()}}),[m,f]);const N=async(e,t)=>{if(f)try{let r;r="E"===e?5===t?2:4:"A"===e?2:3,await o.T6(e,null,r)}catch(r){console.error("Error playing string:",r)}},j=(e,t)=>{const r=Date.now();r-v<300&&y===e&&f&&!x&&(w(!0),o.T6(e,null,t).then((()=>setTimeout((()=>w(!1)),300))).catch((e=>{console.error("Error playing note:",e),w(!1)}))),p(r),b(e)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:l,onChange:e=>u(e.target.checked),className:"form-checkbox h-4 w-4"}),(0,a.jsx)("span",{children:"Show Scale Degrees"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Double-tap on notes to hear them"}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"fretboard-container",children:[(0,a.jsx)("div",{className:"string-labels",children:d.map(((e,t)=>(0,a.jsx)(c,{note:e,index:t,onClick:N},t)))}),(0,a.jsx)("div",{className:"fretboard-scroll",children:(0,a.jsxs)("div",{className:"fretboard",children:[d.map(((e,n)=>(0,a.jsx)("div",{className:"string",children:[...Array(h+1)].map(((n,o)=>{const c=(s.Y6.indexOf(e)+o)%12,u=s.Y6[c],d=u===t;return(0,a.jsx)(i,{note:u,fret:o,isRoot:d,selectedScale:r,showScaleDegrees:l,rootNote:t,stringNote:e,onNoteTap:j},o)}))},n))),(0,a.jsx)("div",{className:"fret-numbers",children:[...Array(h+1)].map(((e,t)=>(0,a.jsx)("div",{className:"fret-number",children:t},t)))})]})})]})]})}},923:(e,t,r)=>{r.d(t,{Qr:()=>f,T6:()=>w,Xg:()=>h,bK:()=>v,ls:()=>m,wD:()=>g});var n=r(200),s=r.n(n);let o=null,a=null,i=!1,c=null,l=.8,u=1.5,d="";const h=async()=>(o||(o=new(window.AudioContext||window.webkitAudioContext),await o.resume(),console.log("Audio context initialized")),o),m=e=>e>=0&&e<=1&&(l=e,!0),f=e=>e>=.1&&(u=e,!0),g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"acoustic_guitar_steel";return d=e,i&&c||(o||await h(),i=!0,c=s().instrument(o,e,{format:"mp3",soundfont:"MusyngKite",gain:l}).then((t=>(a=t,console.log(`Loaded instrument: ${e} with volume: ${l}`),i=!1,a))).catch((t=>{throw console.error(`Failed to load instrument ${e}:`,t),i=!1,t}))),c},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.match(/[A-G][#b]?[0-9]/)?e:`${e}${t}`},w=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(!a)try{await g()}catch(i){return void console.error("Failed to load instrument:",i)}const n=t||u,s=x(e,r);return a.play(s,o.currentTime,{duration:n,gain:l})},v=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(!a)try{await g()}catch(s){return void console.error("Failed to load instrument:",s)}const n=t||u;return Promise.all(e.map(((e,t)=>{const s=x(e,r),i=.02*t;return a.play(s,o.currentTime+i,{duration:n,gain:l})})))}}}]);
//# sourceMappingURL=952.54e83e10.chunk.js.map