"use strict";(self.webpackChunkguitar_scale_visualizer=self.webpackChunkguitar_scale_visualizer||[]).push([[740],{740:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var o=n(43),r=n(128);function s(e){let{children:t,fallback:n=null}=e;const[r,s]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{s(!0)}),[]),r?t:n}var a=n(923),i=n(579);const c=e=>{let{variation:t,instrument:r,onPlayChord:s}=e;const[a,c]=(0,o.useState)(null),[l,d]=(0,o.useState)(0);(0,o.useEffect)((()=>{"undefined"!==typeof window&&n.e(81).then(n.bind(n,81)).then((e=>{c((()=>e.default))}))}),[]);return a?(0,i.jsx)("div",{onClick:()=>{const e=Date.now();e-l<300&&s(t),d(e)},style:{cursor:"pointer"},title:"Double-tap to play chord",children:(0,i.jsx)(a,{chord:t,instrument:r,lite:!1})}):(0,i.jsx)("div",{className:"h-24 w-full bg-gray-100 animate-pulse rounded"})},l={major:"major",minor:"minor",m:"minor",dim:"dim",dim7:"dim7",sus2:"sus2",sus4:"sus4"},d=e=>{let{rootNote:t,selectedScale:d,onChordSelect:u,selectedInstrument:h}=e;const[m,f]=(0,o.useState)({}),[v,y]=(0,o.useState)(null),[x,p]=(0,o.useState)(""),[g,j]=(0,o.useState)([]),[w,b]=(0,o.useState)(null),[E,k]=(0,o.useState)(!1),[N,C]=(0,o.useState)(!1),[D,S]=(0,o.useState)(0),[A,O]=(0,o.useState)(null);(0,o.useEffect)((()=>{if("undefined"!==typeof window){const e=async()=>{try{await a.Xg(),await a.wD(h||"acoustic_guitar_steel"),k(!0)}catch(e){console.error("Error initializing audio:",e)}},t=()=>{e(),document.removeEventListener("click",t)};return document.addEventListener("click",t,{once:!0}),()=>{document.removeEventListener("click",t)}}}),[h]),(0,o.useEffect)((()=>{"undefined"!==typeof window&&n.e(878).then(n.t.bind(n,878,19)).then((e=>{b(e.default)})).catch((e=>{console.error("Failed to load guitar chord data:",e)}))}),[]),(0,o.useEffect)((()=>{if(t&&d){const e=(0,r.on)(t,d);f(e);const n=Object.keys(e)[0];y(e[n]),p(n)}}),[t,d]),(0,o.useEffect)((()=>{if(E&&h){(async()=>{try{await a.wD(h)}catch(e){console.error("Error loading instrument:",e)}})()}}),[h,E]),(0,o.useEffect)((()=>{if(v&&w){var e;const t=Object.keys(m).find((e=>m[e]===v));p(t||"");const n=Object.keys(m).indexOf(t),o=r.hn[d.category][n]||"major",s=l[o]||o,a=(e=>({"G#":"Ab","D#":"Eb","E#":"F","B#":"C","F#":"G","C#":"D","A#":"Bb"}[e]||e.replace("#","sharp")))(t),i=null===(e=w.chords[a])||void 0===e?void 0:e.find((e=>e.suffix===s));i||console.warn(`No chord data found for ${t} with type ${s}`);const c=i?i.positions:[];j(c)}}),[v,m,d,w]);const F=async e=>{if(E&&!N){C(!0);try{const t=[],n=["E","A","D","G","B","E"],o=[2,2,3,3,3,4];e.frets.forEach(((e,r)=>{if(-1!==e){const s=n[n.length-1-r],a=o[r],i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],c=(i.indexOf(s)+e)%12,l=i[c],d=a+Math.floor((i.indexOf(s)+e)/12);t.push({note:l,octave:d})}})),await Promise.all(t.map((e=>{let{note:t,octave:n}=e;return a.T6(t,null,n)}))),setTimeout((()=>C(!1)),1500)}catch(t){console.error("Error playing chord:",t),C(!1)}}},z=async()=>{if(E&&!N&&v){C(!0);try{await a.bK(v),setTimeout((()=>C(!1)),1500)}catch(e){console.error("Error playing chord:",e),C(!1)}}};if(!t||!d)return(0,i.jsx)("div",{className:"chord-visualizer",children:(0,i.jsx)("p",{children:"Please select a scale."})});const{category:G,name:_}=d,$=r.pu[G][_],T=r.hn[G],B=(0,r.Ap)(t,$),L={strings:6,fretsOnChord:4,name:"Guitar",keys:[],tunings:{standard:["E","A","D","G","B","E"]}};return(0,i.jsx)(s,{fallback:(0,i.jsx)("div",{className:"chord-visualizer p-4",children:"Loading chord visualizer..."}),children:(0,i.jsxs)("div",{className:"chord-visualizer",children:[(0,i.jsx)("p",{className:"double-tap-instruction",children:"Double-tap on any chord to play it"}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"chord-table",children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:B.map(((e,t)=>(0,i.jsx)("th",{children:e},t)))})}),(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:Object.keys(m).map(((e,t)=>{const n=v===m[e];return(0,i.jsxs)("td",{children:[(0,i.jsxs)("button",{onClick:()=>((e,t)=>{const n=Date.now();u(t),y(t),n-D<300&&A===e&&z(),S(n),O(e)})(e,m[e]),className:"chord-button "+(n?"selected-chord":""),title:"Double-tap to play",children:[e,T[t]]}),(0,i.jsx)("div",{className:"chord-notes",children:m[e].join(", ")}),(0,i.jsxs)("div",{className:"chord-degree",children:[t+1," ",T[t]]})]},t)}))})})]})}),v&&g.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold mt-4 mb-2",children:["Chord Variations of ",x,T[Object.keys(m).indexOf(x)]]}),(0,i.jsx)("p",{className:"text-sm mb-2",children:"Double-tap on a chord diagram to hear how it sounds"}),(0,i.jsx)("div",{className:"chord-grid",children:g.map(((e,t)=>(0,i.jsxs)("div",{className:"chord-variation",children:[(0,i.jsxs)("h3",{className:"variation-title",children:["Variation ",t+1]}),(0,i.jsx)(c,{variation:e,instrument:L,onPlayChord:F})]},t)))})]}):(0,i.jsx)("p",{children:"No variations available for this chord."})]})})}},923:(e,t,n)=>{n.d(t,{Qr:()=>f,T6:()=>x,Xg:()=>h,bK:()=>p,ls:()=>m,wD:()=>v});var o=n(200),r=n.n(o);let s=null,a=null,i=!1,c=null,l=.8,d=1.5,u="";const h=async()=>(s||(s=new(window.AudioContext||window.webkitAudioContext),await s.resume(),console.log("Audio context initialized")),s),m=e=>e>=0&&e<=1&&(l=e,!0),f=e=>e>=.1&&(d=e,!0),v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"acoustic_guitar_steel";return u=e,i&&c||(s||await h(),i=!0,c=r().instrument(s,e,{format:"mp3",soundfont:"MusyngKite",gain:l}).then((t=>(a=t,console.log(`Loaded instrument: ${e} with volume: ${l}`),i=!1,a))).catch((t=>{throw console.error(`Failed to load instrument ${e}:`,t),i=!1,t}))),c},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.match(/[A-G][#b]?[0-9]/)?e:`${e}${t}`},x=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(!a)try{await v()}catch(i){return void console.error("Failed to load instrument:",i)}const o=t||d,r=y(e,n);return a.play(r,s.currentTime,{duration:o,gain:l})},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(!a)try{await v()}catch(r){return void console.error("Failed to load instrument:",r)}const o=t||d;return Promise.all(e.map(((e,t)=>{const r=y(e,n),i=.02*t;return a.play(r,s.currentTime+i,{duration:o,gain:l})})))}}}]);
//# sourceMappingURL=740.d62872cf.chunk.js.map