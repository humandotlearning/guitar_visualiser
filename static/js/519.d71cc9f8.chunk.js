"use strict";(self.webpackChunkguitar_scale_visualizer=self.webpackChunkguitar_scale_visualizer||[]).push([[519],{519:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(43),s=n(923),a=n(128),r=n(579);const l=e=>{let{rootNote:t,selectedScale:n,selectedChord:l,selectedInstrument:o,onInstrumentChange:c}=e;const[d,u]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1),[h,v]=(0,i.useState)(null),[x,p]=(0,i.useState)(!1),[y,j]=(0,i.useState)(.8),[w,b]=(0,i.useState)(1.5),[f,N]=(0,i.useState)(o||"acoustic_guitar_steel"),k=(0,i.useRef)(null),_={acoustic_guitar_nylon:"Acoustic Guitar (nylon)",acoustic_guitar_steel:"Acoustic Guitar (steel)",electric_guitar_clean:"Electric Guitar (clean)",electric_guitar_jazz:"Electric Guitar (jazz)",electric_guitar_muted:"Electric Guitar (muted)",overdriven_guitar:"Overdriven Guitar",distortion_guitar:"Distortion Guitar",guitar_harmonics:"Guitar Harmonics"},C=n&&t?(0,a.Ap)(t,a.pu[n.category][n.name]):[];(0,i.useEffect)((()=>{function e(e){k.current&&!k.current.contains(e.target)&&p(!1)}return x&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[x]),(0,i.useEffect)((()=>{if("undefined"!==typeof window){const e=async()=>{try{await s.Xg(),await s.wD(f),s.ls(y),s.Qr(w),m(!0)}catch(e){console.error("Error initializing audio:",e)}},t=()=>{e(),document.removeEventListener("click",t)};return document.addEventListener("click",t,{once:!0}),()=>{document.removeEventListener("click",t)}}}),[]),(0,i.useEffect)((()=>{if(g){(async()=>{try{o&&o!==f&&(N(o),await s.wD(o)),s.ls(y),s.Qr(w)}catch(e){console.error("Error updating audio settings:",e)}})()}}),[o,y,w,g,f]);const E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(g)try{await s.T6(e,t)}catch(n){console.error("Error playing note:",n)}},S=()=>l&&l.length>0?l[0]:"",L=()=>{p(!1)};return(0,r.jsxs)("div",{className:"audio-playback relative",children:[x&&(0,r.jsx)("div",{className:"overlay",onClick:L}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Audio Playback"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Using: ",_[f]]})]}),(0,r.jsx)("button",{className:"settings-toggle settings-toggle-small "+(x?"active":""),onClick:()=>p(!x),"aria-label":"Sound Settings",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"10",cy:"10",r:"2"}),(0,r.jsx)("path",{d:"M13.45 13.45L13 17h-6l-.45-3.55a6.07 6.07 0 01-1.64-.95L1.5 14.5.5 12l2.9-1.74c-.02-.17-.03-.34-.03-.51 0-.17.01-.34.03-.51L.5 7.5l1-2.5 3.41 2c.53-.38 1.07-.7 1.64-.95L7 2.5h6l.45 3.55c.57.25 1.11.57 1.64.95l3.41-2 1 2.5-2.9 1.74c.02.17.03.34.03.51 0 .17-.01.34-.03.51l2.9 1.74-1 2.5-3.41-2a6.07 6.07 0 01-1.64.95z"})]})})]}),x&&(0,r.jsxs)("div",{className:"settings-panel settings-panel-audio",ref:k,children:[(0,r.jsxs)("div",{className:"settings-header",children:[(0,r.jsx)("div",{className:"settings-title",children:"Audio Settings"}),(0,r.jsx)("button",{className:"settings-close",onClick:L,children:"\xd7"})]}),(0,r.jsxs)("div",{className:"setting-group",children:[(0,r.jsx)("label",{htmlFor:"audio-instrument-select",children:"Guitar Sound"}),(0,r.jsxs)("div",{className:"instrument-controls instrument-row",children:[(0,r.jsx)("div",{className:"selected-instrument",children:(0,r.jsx)("span",{className:"selected-instrument-name",children:_[f]})}),(0,r.jsx)("select",{id:"audio-instrument-select",value:f,onChange:e=>{N(e.target.value),c(e.target.value)},className:"instrument-select",children:Object.entries(_).map((e=>{let[t,n]=e;return(0,r.jsx)("option",{value:t,children:n},t)}))}),(0,r.jsx)("button",{className:"test-sound-button",onClick:async()=>{try{await s.bK(["E","G#","B"],w)}catch(e){console.error("Error playing test note:",e)}},children:"Test Sound"})]})]}),(0,r.jsx)("div",{className:"setting-group",children:(0,r.jsxs)("div",{className:"slider-container",children:[(0,r.jsxs)("label",{htmlFor:"volume-control-audio",children:["Volume: ",Math.round(100*y),"%"]}),(0,r.jsx)("div",{className:"slider-wrapper",children:(0,r.jsx)("input",{id:"volume-control-audio",type:"range",min:"0",max:"1",step:"0.05",value:y,onChange:e=>j(parseFloat(e.target.value)),className:"slider"})})]})}),(0,r.jsx)("div",{className:"setting-group",children:(0,r.jsxs)("div",{className:"slider-container",children:[(0,r.jsxs)("label",{htmlFor:"sustain-control-audio",children:["Sustain: ",w.toFixed(1),"s"]}),(0,r.jsx)("div",{className:"slider-wrapper",children:(0,r.jsx)("input",{id:"sustain-control-audio",type:"range",min:"0.5",max:"3",step:"0.1",value:w,onChange:e=>b(parseFloat(e.target.value)),className:"slider"})})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)("button",{onClick:async()=>{if(g&&!d&&0!==C.length){v("scale"),u(!0);try{for(let e=0;e<C.length;e++)await new Promise((t=>{setTimeout((()=>{E(C[e]),t()}),0===e?0:500)}))}catch(e){console.error("Error playing scale:",e)}finally{setTimeout((()=>u(!1)),500)}}},disabled:d||0===C.length,className:`p-2 ${d&&"scale"===h?"bg-green-500":"bg-blue-500"} text-white rounded disabled:opacity-50`,children:d&&"scale"===h?"Playing...":`${t} ${(null===n||void 0===n?void 0:n.name)||""} Scale`}),(0,r.jsx)("button",{onClick:async()=>{if(g&&!d&&l&&0!==l.length){v("chord"),u(!0);try{await s.bK(l),setTimeout((()=>u(!1)),1500)}catch(e){console.error("Error playing chord:",e),u(!1)}}},disabled:d||!l||0===l.length,className:`p-2 ${d&&"chord"===h?"bg-green-500":"bg-blue-500"} text-white rounded disabled:opacity-50`,children:d&&"chord"===h?"Playing...":`${S()} Chord`}),(0,r.jsx)("button",{onClick:async()=>{if(g&&!d&&l&&0!==l.length){v("arpeggio"),u(!0);try{for(let e=0;e<l.length;e++)await new Promise((t=>{setTimeout((()=>{E(l[e]),t()}),0===e?0:250)}))}catch(e){console.error("Error playing arpeggio:",e)}finally{setTimeout((()=>u(!1)),500)}}},disabled:d||!l||0===l.length,className:`p-2 ${d&&"arpeggio"===h?"bg-green-500":"bg-blue-500"} text-white rounded disabled:opacity-50`,children:d&&"arpeggio"===h?"Playing...":`${S()} Arpeggio`})]}),!g&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Click anywhere to initialize audio..."}),l&&l.length>0&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("p",{className:"text-sm",children:["Selected Chord: ",(0,r.jsx)("span",{className:"font-medium",children:l.join(" - ")})]})})]})}},923:(e,t,n)=>{n.d(t,{Qr:()=>h,T6:()=>p,Xg:()=>g,bK:()=>y,ls:()=>m,wD:()=>v});var i=n(200),s=n.n(i);let a=null,r=null,l=!1,o=null,c=.8,d=1.5,u="";const g=async()=>(a||(a=new(window.AudioContext||window.webkitAudioContext),await a.resume(),console.log("Audio context initialized")),a),m=e=>e>=0&&e<=1&&(c=e,!0),h=e=>e>=.1&&(d=e,!0),v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"acoustic_guitar_steel";return u=e,l&&o||(a||await g(),l=!0,o=s().instrument(a,e,{format:"mp3",soundfont:"MusyngKite",gain:c}).then((t=>(r=t,console.log(`Loaded instrument: ${e} with volume: ${c}`),l=!1,r))).catch((t=>{throw console.error(`Failed to load instrument ${e}:`,t),l=!1,t}))),o},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.match(/[A-G][#b]?[0-9]/)?e:`${e}${t}`},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(!r)try{await v()}catch(l){return void console.error("Failed to load instrument:",l)}const i=t||d,s=x(e,n);return r.play(s,a.currentTime,{duration:i,gain:c})},y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(!r)try{await v()}catch(s){return void console.error("Failed to load instrument:",s)}const i=t||d;return Promise.all(e.map(((e,t)=>{const s=x(e,n),l=.02*t;return r.play(s,a.currentTime+l,{duration:i,gain:c})})))}}}]);
//# sourceMappingURL=519.d71cc9f8.chunk.js.map